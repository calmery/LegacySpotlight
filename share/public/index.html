<!DOCTYPE html>
<html lang="ja">

    <head>

        <meta charset="utf-8">
        <title>Share</title>

        <link rel="stylesheet" href="/yacona/base">
        <style>
            .server {
                float: left;
                line-height: 22pt;
            }
        </style>

    </head>

    <body>

        <section id="application">

            <nav>

                <div class="menu white">Spotlight v0.5.4</div>
                <div class="menu selected">
                    <div class="left">共有</div>
                    <div class="right"></div>
                </div>
                <a href="settings.html">
                    <div class="menu">
                        <div class="left">設定</div>
                        <div class="right"></div>
                    </div>
                </a>

            </nav>

            <div id="myProfile">
                <div id="load">
                    <img src="" id="icon">
                    <div id="name"></div>
                    <div id="screen_name">@</div>
                </div>
            </div>

            <div id="main">

                <div id="result">
                    <div id="lists"></div>
                </div>

                <div id="loading" style="display: none"></div>

            </div>

        </section>

    </body>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/yacona/preload"></script>
    <script src="/yacona/common"></script>
    <script>
    
        socket.emit( 'getList', true )
        socket.on( 'list', function( list ){
            let e = document.getElementById( 'lists' )
            for( let i=0; i<list.length; i++ )
                e.innerHTML += '<div class="content clearfix"><div class="server float_l">' + list[i] + '</div><div class="btn float_r" onclick="share(\'' + list[i] + '\')">共有</div></div>'
        } )
        
        socket.on( 'shared', function(){ document.getElementById( 'loading' ).style.display = 'none' } )
        socket.on( 'reject', function(){ alert( 'Rejected' ); document.getElementById( 'loading' ).style.display = 'none' } )
        function share( logName ){
            if( confirm( 'Share ?' ) ){
                document.getElementById( 'loading' ).style.display = 'block'
                socket.emit( 'share', logName )
            }
        }
        
    </script>

</html>